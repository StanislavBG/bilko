{
  "$schema": "./manifest.schema.json",
  "version": "1.0.0",
  "lastUpdated": "2026-01-24",
  "primaryDirective": "ARCH-000",
  "rules": {
    "ARCH-000": {
      "id": "ARCH-000",
      "title": "Primary Directive: Rules-First Development",
      "path": "rules/architecture/000-primary-directive.md",
      "partition": "architecture",
      "priority": "ABSOLUTE",
      "version": "1.0.0",
      "triggers": ["*"],
      "dependencies": [],
      "crossReferences": [],
      "description": "NO CODE SHALL BE WRITTEN WITHOUT FIRST CONSULTING THE RULES."
    },
    "ARCH-001": {
      "id": "ARCH-001",
      "title": "Core Architecture Principles",
      "path": "rules/architecture/001-core-principles.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "2.0.0",
      "triggers": ["architecture", "principle", "core", "express", "react", "tailwind", "dark mode"],
      "dependencies": ["ARCH-000"],
      "crossReferences": [],
      "description": "Foundational technology choices and architectural patterns."
    },
    "ARCH-002": {
      "id": "ARCH-002",
      "title": "Rule Maintenance",
      "path": "rules/architecture/002-rule-maintenance.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "1.0.0",
      "triggers": ["rule", "rules", "modify rule", "create rule", "new rule", "update rule"],
      "dependencies": ["ARCH-000"],
      "crossReferences": [],
      "description": "How to create, modify, and version rules."
    },
    "ARCH-003": {
      "id": "ARCH-003",
      "title": "Orchestration Layer",
      "path": "rules/architecture/003-orchestration-layer.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "1.0.0",
      "triggers": ["orchestrat", "proxy", "external", "n8n", "api call", "trace", "logging"],
      "dependencies": ["ARCH-000", "INT-003"],
      "crossReferences": ["DATA-002", "INT-001"],
      "description": "The intelligent proxy between web app and external services."
    },
    "ARCH-004": {
      "id": "ARCH-004",
      "title": "Development Pacing",
      "path": "rules/architecture/004-development-pacing.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "1.0.0",
      "triggers": ["slow", "incremental", "verify", "consult", "explain", "go slow", "pacing"],
      "dependencies": ["ARCH-000"],
      "crossReferences": [],
      "description": "Move slowly, build incrementally, verify before building."
    },
    "ARCH-005": {
      "id": "ARCH-005",
      "title": "System Boundaries",
      "path": "rules/architecture/005-system-boundaries.md",
      "partition": "architecture",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["boundary", "replit", "n8n", "separation", "owns", "ownership"],
      "dependencies": ["ARCH-000", "ARCH-008"],
      "crossReferences": ["ARCH-007", "ARCH-008"],
      "description": "Defines boundaries between Replit app and external systems."
    },
    "ARCH-007": {
      "id": "ARCH-007",
      "title": "System Purpose",
      "path": "rules/architecture/007-system-purpose.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "1.1.0",
      "triggers": ["purpose", "mission", "overview", "system", "what is"],
      "dependencies": [],
      "crossReferences": [],
      "description": "Defines the overall system purpose and mission. (Migrated from SHARED-001)"
    },
    "ARCH-008": {
      "id": "ARCH-008",
      "title": "Agent Coordination",
      "path": "rules/architecture/008-agent-coordination.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "2.1.0",
      "triggers": ["agent", "coordination", "ownership", "project", "replit", "n8n"],
      "dependencies": ["ARCH-007"],
      "crossReferences": ["ARCH-003", "INT-003"],
      "description": "Defines ownership boundaries between Replit and n8n agents. (Migrated from SHARED-002)"
    },
    "INT-003": {
      "id": "INT-003",
      "title": "Orchestrator Communication Contract",
      "path": "rules/integration/003-orchestrator-contract.md",
      "partition": "integration",
      "priority": "HIGH",
      "version": "2.1.0",
      "triggers": ["contract", "webhook", "request", "response", "payload", "format"],
      "dependencies": ["ARCH-007", "ARCH-003"],
      "crossReferences": ["ARCH-003", "INT-001"],
      "description": "Technical contract for orchestrator communication. (Migrated from SHARED-003)"
    },
    "INT-004": {
      "id": "INT-004",
      "title": "n8n Self-Hosting Setup Guide",
      "path": "rules/integration/004-n8n-setup.md",
      "partition": "integration",
      "priority": "HIGH",
      "version": "1.1.0",
      "triggers": ["self-host", "n8n setup", "n8n project", "deploy n8n"],
      "dependencies": ["ARCH-007"],
      "crossReferences": ["INT-003", "ARCH-008"],
      "description": "Complete setup guide for self-hosting n8n on Replit. (Migrated from SHARED-004)"
    },
    "HUB-001": {
      "id": "HUB-001",
      "title": "Hub Layout",
      "path": "rules/hub/001-layout.md",
      "partition": "hub",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["hub", "layout", "sidebar", "navigation", "shell", "header"],
      "dependencies": ["ARCH-001", "UI-001"],
      "crossReferences": ["UI-001"],
      "description": "Defines the Application Hub shell layout structure."
    },
    "HUB-002": {
      "id": "HUB-002",
      "title": "Access Control",
      "path": "rules/hub/002-access-control.md",
      "partition": "hub",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["access", "control", "role", "admin", "user", "permission", "auth"],
      "dependencies": ["ARCH-001"],
      "crossReferences": [],
      "description": "Defines how users are granted access to Hub applications."
    },
    "HUB-003": {
      "id": "HUB-003",
      "title": "Nested Navigation Pattern",
      "path": "rules/hub/003-nested-navigation.md",
      "partition": "hub",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["nested nav", "secondary nav", "tertiary nav", "multi-level", "navigation levels"],
      "dependencies": ["HUB-001", "UI-001"],
      "crossReferences": ["UI-003"],
      "description": "Defines optional 2nd and 3rd level navigation within applications (max 3 levels)."
    },
    "APP-HOME-001": {
      "id": "APP-HOME-001",
      "title": "Home Dashboard",
      "path": "rules/apps/home-dashboard/001-overview.md",
      "partition": "apps",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["home", "dashboard", "overview", "landing"],
      "dependencies": ["HUB-001", "HUB-002"],
      "crossReferences": [],
      "description": "The default application aggregating information from all apps."
    },
    "APP-MEMORY-001": {
      "id": "APP-MEMORY-001",
      "title": "Memory Explorer",
      "path": "rules/apps/memory-explorer/001-overview.md",
      "partition": "apps",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["memory", "explorer", "trace", "debug", "communication"],
      "dependencies": ["HUB-001", "HUB-002", "DATA-002"],
      "crossReferences": ["DATA-002", "ARCH-003"],
      "description": "Admin-only app for viewing orchestration layer traces."
    },
    "DATA-001": {
      "id": "DATA-001",
      "title": "Data Principles",
      "path": "rules/data/001-data-principles.md",
      "partition": "data",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["data", "database", "schema", "model", "drizzle", "postgres", "table"],
      "dependencies": ["ARCH-001"],
      "crossReferences": [],
      "description": "Rules for data models, schemas, and persistence."
    },
    "DATA-002": {
      "id": "DATA-002",
      "title": "Communication Trace Storage",
      "path": "rules/data/002-communication-traces.md",
      "partition": "data",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["trace", "communication", "log", "request", "response", "storage"],
      "dependencies": ["DATA-001", "ARCH-003"],
      "crossReferences": ["ARCH-003", "APP-MEMORY-001"],
      "description": "Schema and practices for storing communication traces."
    },
    "UI-001": {
      "id": "UI-001",
      "title": "UI Principles",
      "path": "rules/ui/001-ui-principles.md",
      "partition": "ui",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["ui", "interface", "component", "styling", "page", "user sees", "layout"],
      "dependencies": ["ARCH-001"],
      "crossReferences": ["HUB-001"],
      "description": "Rules for building user interfaces."
    },
    "UI-002": {
      "id": "UI-002",
      "title": "Endpoint Info Pattern",
      "path": "rules/ui/002-endpoint-info.md",
      "partition": "ui",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["endpoint", "info icon", "api source", "data source", "endpoint info"],
      "dependencies": ["UI-001", "ARCH-001"],
      "crossReferences": [],
      "description": "Pattern for displaying API endpoint metadata via info icons in UI sections."
    },
    "UI-003": {
      "id": "UI-003",
      "title": "Secondary Navigation Pattern",
      "path": "rules/ui/003-secondary-navigation.md",
      "partition": "ui",
      "priority": "HIGH",
      "version": "1.0.0",
      "triggers": ["secondary nav", "tabs", "master detail", "two column", "secondary sidebar", "complex layout"],
      "dependencies": ["UI-001", "HUB-001"],
      "crossReferences": ["HUB-001"],
      "description": "Defines when and how to implement secondary navigation within applications."
    },
    "INT-001": {
      "id": "INT-001",
      "title": "n8n Integration Rules",
      "path": "rules/integration/001-n8n-integration.md",
      "partition": "integration",
      "priority": "HIGH",
      "version": "2.0.0",
      "triggers": ["n8n", "webhook", "integration", "workflow", "external"],
      "dependencies": ["ARCH-003", "INT-003"],
      "crossReferences": ["ARCH-003", "INT-003", "INT-002", "INT-004"],
      "description": "Rules for building integrations with n8n workflows."
    },
    "INT-002": {
      "id": "INT-002",
      "title": "n8n API Best Practices",
      "path": "rules/integration/002-n8n-api-practices.md",
      "partition": "integration",
      "priority": "HIGH",
      "version": "1.2.0",
      "triggers": ["n8n api", "api key", "n8n cloud", "recency", "known issues", "webhook bug"],
      "dependencies": ["INT-001", "ARCH-003"],
      "crossReferences": ["ARCH-003"],
      "description": "API practices, recency protocol, and known issues registry."
    },
    "ARCH-006": {
      "id": "ARCH-006",
      "title": "Agent Bootstrap Protocol",
      "path": "rules/architecture/006-agent-bootstrap.md",
      "partition": "architecture",
      "priority": "CRITICAL",
      "version": "1.0.0",
      "triggers": ["bootstrap", "session start", "new session", "how to use rules"],
      "dependencies": ["ARCH-000"],
      "crossReferences": [],
      "description": "How AI developers should bootstrap and use the rule system."
    }
  },
  "partitions": {
    "architecture": {
      "path": "rules/architecture/",
      "description": "System-wide architectural rules, principles, and cross-project coordination",
      "readOrder": 0
    },
    "hub": {
      "path": "rules/hub/",
      "description": "Application Hub shell and access control",
      "readOrder": 1
    },
    "ui": {
      "path": "rules/ui/",
      "description": "User interface patterns and components",
      "readOrder": 2
    },
    "data": {
      "path": "rules/data/",
      "description": "Data model and persistence rules",
      "readOrder": 3
    },
    "apps": {
      "path": "rules/apps/",
      "description": "Per-application specific rules",
      "readOrder": 4
    },
    "integration": {
      "path": "rules/integration/",
      "description": "External service integration and cross-project contracts",
      "readOrder": 5
    }
  },
  "routing": {
    "redFlags": [
      { "pattern": "n8n|stripe|external service", "partitions": ["integration"] },
      { "pattern": "database|table|schema|migrate", "partitions": ["data"] },
      { "pattern": "user sees|layout|page|component", "partitions": ["ui"] },
      { "pattern": "hub|sidebar|navigation|access control", "partitions": ["hub"] },
      { "pattern": "endpoint|api route|authentication", "partitions": ["architecture"] },
      { "pattern": "new app|new feature", "partitions": ["apps", "architecture"] }
    ],
    "alwaysInclude": ["ARCH-000", "ARCH-006"]
  }
}
